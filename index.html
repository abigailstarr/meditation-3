<!DOCTYPE html>
<html>
  <head>
    <title>Computer Disk on Lemon Chiffon</title>
      <script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
    </head>
</html>

<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

<script>
  /* global nn */
  
  //get & use url parameters
  const params = new URLSearchParams(location.search);
  
  
  //define constant variables of gif and background color
  const GIF = "disk.gif";
  const COLOR = "LemonChiffon";
  
  function sleep (ms) {
    return new Promise(resolve => setTimeout(resolve, ms))
  }
  
  function createGif (x, y) {
    nn.create("img")
      .set({
        src: `${GIF}#${Math.random()}`
      })
      .css({
        position: "absolute",
        left: x,
        top: y,
        imageRendering: "pixelated",
        width: 50,
      })
      .addTo("body")
  }

  //always use "async" when using await
  async function setup () {
    nn.get("body")
      .css({
        backgroundColor: COLOR
      })
    
    // use "await" to pause code until this line is executed
    const gif = await nn.loadImage(GIF);
    const num = 500;
    let rad = 0;
    for (let c = 0; c < num; c++) {
      const cx = nn.width / 2; //cx stands for center x pos
      const cy = nn.height / nn.width;  //cy stands for center y pos
      const s = 0.3; //scale
      const x = cx + Math.cos(c * s) * rad;
      const y = cy + Math.sin(c * s) * rad;
      await sleep(10);
      createGif(x, y);
      rad += 1.1;
      }
  }

  nn.on("load", setup);

</script>