<!-- meditation #3; mr.pea on lemon chiffon -->

<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

<script>
  /* global nn */
  
  //define constant variables of gif and background color
  const GIF = "pea.gif";
  const COLOR = "LemonChiffon";
  
  function sleep (ms) {
    return new Promise(resolve => setTimeout(resolve, ms))
  }
  
  function createGif (x, y) {
    nn.create("img")
      .set({
        src: `${GIF}#${Math.random()}`
      })
      .css({
        position: "absolute",
        left: x,
        top: y,
        imageRendering: "pixelated",
        width: 20,
      })
      .addTo("body")
  }

  //always use "async" when using await
  async function setup () {
    nn.get("body")
      .css({
        backgroundColor: COLOR
      })
    
    // use "await" to pause code until this line is executed
    const gif = await nn.loadImage(GIF);
    const num = 1000;
    let rad = 0;
    for (let c = 0; c < num; c++) {
      const cx = nn.width / 2; //cx stands for center x pos
      const cy = nn.height / 2;  //cy stands for center y pos
      const s = 0.05; //scale
      const x = cx + Math.cos(c * s) * rad;
      const y = cy + Math.sin(c * s) * rad;
      createGif(x, y);
      rad += 0.5;
      }
  }

  nn.on("load", setup);

</script>