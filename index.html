<!-- meditation #3; mr.pea on lemon chiffon -->

<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

<script>
  /* global nn */
  
  //define constant variables of gif and background color
  const GIF = "pea.gif";
  const COLOR = "LemonChiffon";
  
  function createGif (x, y) {
    nn.create("img")
      .set({
        src: `${GIF}#${Math.random()}`
      })
      .css({
        position: "absolute",
        left: x,
        top: y,
        imageRendering: "pixelated"
      })
      .addTo("body")
  }

  //always use "async" when using await
  async function setup () {
    nn.get("body")
      .css({
        backgroundColor: COLOR
      })
    
    // use "await" to pause code until this line is executed
    const gif = await nn.loadImage(GIF);
    
    //how many horizontal gifs do we want
    const colSize = gif.width / 2;
    const numCols = nn.width / colSize;
    //how many vertical gifs do we want
    const rowSize = gif.height / 1.5;
    const numRows = (nn.height * 0.6) / rowSize;
    
    //create numCols x numRows many gifs on the screen
    for (let c = 0; c < numCols; c++) {
      const x = c * colSize;
      for (let r = 0; r < numRows; r++) {
        const y = r * rowSize;
        createGif(x, y);
      }
    }
  }

  nn.on("load", setup);

</script>